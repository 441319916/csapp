%%COMMENT:3:8:Decompiling a C ``for'' loop:
\begin{problem}{8}
Consider the following IA32 code for a procedure {\tt foo()}:

\begin{verbatim}
  foo:
      pushl %ebp
      movl %esp,%ebp
      movl 8(%ebp),%ecx
      movl 16(%ebp),%edx
      movl 12(%ebp),%eax
      decl %eax
      js .L3
 .L7:
      cmpl %edx,(%ecx,%eax,4)
      jne .L3
      decl %eax
      jns .L7
 .L3:
      movl %ebp,%esp
      popl %ebp
      ret
\end{verbatim}

Based on the assembly code above, fill in the blanks below in its
corresponding C source code.  (Note: you may only use symbolic
variables $a$, $n$, $val$, and $i$ from the source code in your
expressions below---do {\em not} use register names.)

\begin{verbatim}
int foo(int *a, int n, int val) {
  int i;

  for (i = _________; ____________________________ ; i =___________) {
     ;
  }
  return i;
}
\end{verbatim}
%% answer:  for (i = n-1; (i >=0) && (a[i] == val); i = i-1) 
\end{problem}




