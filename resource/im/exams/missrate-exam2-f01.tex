%%COMMENT:6:8:High-level cache miss rate analysis:
\begin{problem}{8}

A bitmap image is composed of pixels. Each pixel in the image is
represented as four values: three for the primary colors(red, green
and blue - RGB) and one for the transparency information defined as an
alpha channel.

\vspace{0.15in}

In this problem, you will compare the performance of direct mapped and
$4$-way associative caches for a square bitmap image
initialization. Both caches have a size of $128$ bytes. The direct
mapped cache has $8$-byte blocks while the $4$-way associative cache
has $4$-byte blocks.

\vspace{0.15in}

You are given the following definitions

\begin{verbatim}
typedef struct{
    unsigned char r;
    unsigned char g;
    unsigned char b;
    unsigned char a;
}pixel_t;

pixel_t  pixel[16][16];
register int i, j;
\end{verbatim}

Also assume that
\begin{itemize}

\item \verb|sizeof(unsigned char) = 1|
\item \verb|pixel| begins at memory address \verb|0|
\item Both caches are initially empty
\item The array is stored in row-major order
\item Variables \verb|i|,\verb|j| are stored in registers and any access to these variables does not cause a cache miss

\end{itemize}

\end{problem}

A. What fraction of the writes in the following code will result in a miss in the direct mapped cache?

\begin{verbatim}
for (i = 0; i < 16; i ++){
    for (j = 0; j < 16; j ++){
        pixel[i][j].r = 0;
        pixel[i][j].g = 0;
        pixel[i][j].b = 0;
        pixel[i][j].a = 0;
    }
}
\end{verbatim}

Miss rate for writes to pixel:\verb|____________|\%

\vspace{0.25in}

B. Using code in part A, what fraction of the writes will result in a miss in the 4-way associative cache?

Miss rate for writes to pixel:\verb| ____________| \%

\vspace{0.25in}

C. What fraction of the writes in the following code will result in a miss in the direct mapped cache?

\begin{verbatim}
for (i = 0; i < 16; i ++){
    for (j = 0; j < 16; j ++){
        pixel[j][i].r = 0;
        pixel[j][i].g = 0;
        pixel[j][i].b = 0;
        pixel[j][i].a = 0;
    }
}
\end{verbatim}

Miss rate for writes to pixel:\verb|____________|\%

\vspace{0.25in}

D. Using code in part C, what fraction of the writes will result in a miss in the 4-way associative cache?

Miss rate for writes to pixel:\verb|____________|\%

%answer:
%A:  12.5% 
%B:  25%
%C:  25%
%D:  25%
